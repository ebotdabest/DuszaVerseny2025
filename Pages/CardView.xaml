<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:DuszaVerseny2025.Converters"
             x:Class="DuszaVerseny2025.Pages.CardView"
             x:Name="this"
             IsEnabled="{Binding IsInteractable}">

    <Border x:Name="CardBorder"
            BackgroundColor="#1a1a2e"
            StrokeThickness="3"
            Padding="2"
            Margin="0"
            HeightRequest="128"
            WidthRequest="96">

        <Border.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnCardTapped"/>
        </Border.GestureRecognizers>

        <Border.Opacity>
            <Binding Path="Template">
                <Binding.Converter>
                    <local:CardTemplateToAvailabilityConverter/>
                </Binding.Converter>
            </Binding>
        </Border.Opacity>

        <Border.Stroke>
            <Binding Path="."
                     Source="{x:Reference this}">
                <Binding.Converter>
                    <local:CardStrokeConverter/>
                </Binding.Converter>
            </Binding>
        </Border.Stroke>

        <Grid>
            <BoxView Color="{Binding Template.ElementColor}"/>

            <Label Text="{Binding Order}"
                   FontFamily="RetroByte"
                   IsVisible="{Binding IsSelected}"
                   BackgroundColor="Gold"
                   TextColor="Black"
                   FontAttributes="Bold"
                   FontSize="16"
                   Padding="8,4"
                   HorizontalOptions="End"
                   VerticalOptions="Start"
                   Margin="0"/>

            <Label Text="{Binding Template.Name}"
                   FontFamily="RetroByte"
                   FontSize="18"
                   TextColor="White"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   VerticalOptions="Start"
                   Margin="0,10,0,10"/>

            <Grid ColumnDefinitions="Auto,Auto"
                  RowDefinitions="Auto,Auto"
                  VerticalOptions="End"
                  Margin="0,0,0,20">
                <Label Grid.Row="0"
                       Grid.Column="0"
                       Text="⚔️:    "
                       TextColor="#ff6b6b"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Padding="8,4"
                       FontSize="18"/>
                <Label Grid.Row="0"
                       Grid.Column="1"
                       Text="{Binding Template.Attack}"
                       TextColor="#ff6b6b"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Padding="8,4"
                       FontSize="18"/>
                <Label Grid.Row="1"
                       Grid.Column="0"
                       Text="❤️:    "
                       TextColor="#51cf66"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Padding="8,4"
                       FontSize="18"/>
                <Label Grid.Row="1"
                       Grid.Column="1"
                       Text="{Binding Template.Health}"
                       TextColor="#51cf66"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       Padding="8,4"
                       FontSize="18"/>
            </Grid>
        </Grid>
    </Border>
</ContentView>