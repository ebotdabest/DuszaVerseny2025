<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:DuszaVerseny2025.Converters"
             x:Class="DuszaVerseny2025.Pages.CardView"
             x:Name="this"
             WidthRequest="140"
             HeightRequest="280">

    <Border x:Name="CardBorder"
            BackgroundColor="#1a1a2e"
            StrokeThickness="3"
            Padding="12"
            Margin="0"
            WidthRequest="140"
            HeightRequest="280"
            HorizontalOptions="Center"
            VerticalOptions="Center">

        <Border.Stroke>
            <Binding Path="." Source="{x:Reference this}">
                <Binding.Converter>
                    <local:CardStrokeConverter />
                </Binding.Converter>
            </Binding>
        </Border.Stroke>

        <Border.Opacity>
            <Binding Path="IsInteractable">
                <Binding.Converter>
                    <local:BoolToOpacityConverter TrueValue="1.0" FalseValue="0.5" />
                </Binding.Converter>
            </Binding>
        </Border.Opacity>

        <Border.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnCardTapped" />
        </Border.GestureRecognizers>

        <Grid>
            <BoxView Color="{Binding Template.ElementColor}" CornerRadius="12"/>

            <Label Text="{Binding Order}"
                   IsVisible="{Binding IsSelected}"
                   BackgroundColor="Gold"
                   TextColor="Black"
                   FontAttributes="Bold"
                   FontSize="16"
                   Padding="8,4"
                   HorizontalOptions="End"
                   VerticalOptions="Start"
                   Margin="0"/>

            <Label Text="{Binding Template.Name}"
                   FontSize="18"
                   TextColor="White"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   Margin="0,0,0,30"/>

            <Grid RowDefinitions="Auto,Auto" VerticalOptions="End" Margin="0,0,0,20">
                <Image Source="attack_icon.png" HeightRequest="24" HorizontalOptions="Start" Margin="12,0"/>
                <Label Grid.Column="1" Text="{Binding Template.Attack}" TextColor="#ff6b6b" FontAttributes="Bold" FontSize="18"/>

                <Image Grid.Row="1" Source="health_icon.png" HeightRequest="24" HorizontalOptions="Start" Margin="12,0"/>
                <Label Grid.Row="1" Grid.Column="1" Text="{Binding Template.Health}" TextColor="#51cf66" FontAttributes="Bold" FontSize="18"/>
            </Grid>
        </Grid>
    </Border>
</ContentView>